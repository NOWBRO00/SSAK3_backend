# =============================================================================
# Ssak3 Backend Application Configuration
# =============================================================================
# 이 파일은 Spring Boot 애플리케이션의 모든 설정을 담고 있습니다.

# =============================================================================
# 서버 설정
# =============================================================================
server:
  port: ${PORT:8080}  # Render는 PORT 환경 변수를 제공, 없으면 8080 사용
  # servlet:
  #   context-path: /api  # 컨텍스트 경로 설정 (현재는 비활성화)

# =============================================================================
# Spring Boot 애플리케이션 설정
# =============================================================================
spring:
  application:
    name: ssak3-backend  # 애플리케이션 이름
  
  # =============================================================================
  # H2 Database 설정 (개발용)
  # =============================================================================
  # H2는 파일 기반 데이터베이스로 서버 재시작 후에도 데이터가 유지됩니다.
  # 프로덕션 환경에서는 PostgreSQL, MySQL 등을 사용해야 합니다.
  datasource:
    url: jdbc:h2:file:./data/testdb        # H2 파일 기반 데이터베이스 URL (서버 재시작 후에도 데이터 유지)
    driver-class-name: org.h2.Driver  # H2 JDBC 드라이버
    username: sa                   # 데이터베이스 사용자명
    password: password             # 데이터베이스 비밀번호
  
  # H2 콘솔 설정 (개발용)
  # 브라우저에서 http://localhost:8080/h2-console 접속 가능
  h2:
    console:
      enabled: true                # H2 콘솔 활성화
      path: /h2-console           # H2 콘솔 접근 경로
  
  # =============================================================================
  # JPA/Hibernate 설정
  # =============================================================================
  jpa:
    database-platform: org.hibernate.dialect.H2Dialect  # H2용 Hibernate 방언
    hibernate:
      ddl-auto: ${SPRING_JPA_HIBERNATE_DDL_AUTO:update}  # 환경 변수로 제어, 기본값은 update
    show-sql: ${SPRING_JPA_SHOW_SQL:true}                # 환경 변수로 제어, 기본값은 true
    properties:
      hibernate:
        format_sql: true          # SQL 쿼리 포맷팅
  
  # =============================================================================
  # Thymeleaf 템플릿 엔진 설정
  # =============================================================================
  # Thymeleaf는 서버 사이드 템플릿 엔진으로 HTML을 동적으로 생성합니다.
  thymeleaf:
    cache: false                  # 개발 중 템플릿 캐시 비활성화 (수정 시 즉시 반영)
    prefix: classpath:/templates/ # 템플릿 파일 위치
    suffix: .html                 # 템플릿 파일 확장자

# =============================================================================
# 카카오 OAuth 설정
# =============================================================================
kakao:
  client-id: ${KAKAO_CLIENT_ID:}  # 환경 변수에서 읽거나 비워둠
  client-secret: ${KAKAO_CLIENT_SECRET:}  # 환경 변수에서 읽거나 비워둠
  redirect-uri: ${KAKAO_REDIRECT_URI:https://fancy-tanuki-129c30.netlify.app/auth/kakao/callback}
  token-uri: ${KAKAO_TOKEN_URI:https://kauth.kakao.com/oauth/token}
  user-info-uri: ${KAKAO_USER_INFO_URI:https://kapi.kakao.com/v2/user/me}

# =============================================================================
# 로깅 설정
# =============================================================================
# 개발 중 디버깅을 위한 상세 로깅 설정
logging:
  level:
    org.example: DEBUG                    # 애플리케이션 패키지 로그 레벨
    org.springframework.web: DEBUG        # Spring Web 관련 로그 레벨
    org.springframework.web.client: DEBUG # HTTP 클라이언트 관련 로그 레벨
